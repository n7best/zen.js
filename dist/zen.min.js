!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.zen=e():t.zen=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t,e){if(t&&"string"==typeof t){if(!e){var n=r.obj(t);if(n)return n.base?n.getter():n.obj}var s=r.state(t);if("object"==(void 0===e?"undefined":o(e))){if(e.__zen)return e;var i=function(){var n=1,o=r.form(t);return Object.keys(e).forEach(function(t){var i=e[t],f=r.obj(i);f!==!1&&(f.base?(s.depends.push(i),Object.defineProperty(o,i,{get:f.getter,set:f.setter,enumerable:!0,configurable:!1})):(s.depends.push(i.__stateId),n+=i.__dimension,o[t]=i))}),o.resonant=function(t){return s.resonants.push(t)},o.__dimension=n,o.__stateId=s.id,o.__god=function(){return s},{v:o}}();if("object"===(void 0===i?"undefined":o(i)))return i.v}var f=r.formBase(t,function(){return s.stacks[s.stacks.length-1]},function(e){s.stacks.push(e),s.resonants.forEach(function(t){t(e)}),r.resonant(t,e)});return s.stacks.push(e),f}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={__state:{},__objs:{},create:function(t){return this.__state[t]={id:t,depends:[],stacks:[0],resonants:[]}},state:function(t){return void 0===t?this.create(t):void 0===this.__state[t]?this.create(t):this.__state[t]},obj:function(t){return void 0!==t&&(void 0!==this.__objs[t]&&(void 0===this.__objs[t].__zen?{base:!0,getter:Object.getOwnPropertyDescriptor(this.__objs,t).get,setter:Object.getOwnPropertyDescriptor(this.__objs,t).set}:{base:!1,obj:this.__objs[t]}))},formBase:function(t,e,n){if(e&&n)return Object.defineProperty(this.__objs,t,{get:e,set:n,enumerable:!0,configurable:!1}),this.__objs[t]},form:function(t){var e=this.__objs[t]={__zen:!0,id:t};return e},resonant:function(t,e){var n=this;Object.keys(this.__state).forEach(function(o){n.__state[o]&&n.__state[o].depends.length>0&&n.__state[o].depends.indexOf(t)>-1&&n.__state[o].resonants.forEach(function(t){return t(e)})})}};t.exports=n}])});